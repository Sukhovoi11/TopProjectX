<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MiniGram+ — Feed</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <meta name="theme-color" content="#1f7cd6">
</head>
<body data-theme="light">
<script>
    // Check if user is logged in
    const user = localStorage.getItem('mg_user');
    if (!user) location.href = 'login.html';
</script>

<header class="topbar">
    <div class="logo">MiniGram+</div>

    <div class="top-actions">
        <a href="index.html" class="top-link">Home</a>
        <a href="add.html" class="top-link">Create</a>
        <a href="profile.html" class="top-link">Profile</a>
        <button id="theme-toggle" class="theme-btn">Theme</button>
    </div>
</header>

<main class="container">
    <section class="status">
        <div id="connection">Status: <span id="online-status">online</span></div>
        <div id="offline-toast" class="toast hidden">No Connection — You Are Offline</div>
    </section>

    <section id="feed" class="feed">
        <!-- Posts will load here -->
    </section>

    <div id="empty" class="hint">Feed is empty. Press Create to add a post!</div>
</main>

<!-- External scripts (db.js, app.js, service-worker.js) are assumed to be translated and available -->
<script src="db.js"></script>
<script src="app.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
            .then(() => console.log('Service Worker registered'))
            .catch(e => console.warn('SW error', e));
    }
</script>
</body>
</html>
